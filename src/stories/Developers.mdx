import { Meta } from '@storybook/addon-docs';

<Meta title="Разработчикам" />

# Для разработчиков
Раздел, предназначенный для описания процессов взаимодействия с кодовой базой проекта.

## Меню
- [Технологии](#технологии)
- [Структура проекта](#структура-проекта)
- [Правила написания компонентов](#правила-написания-компонентов)
    - [Название файлов](#название-файлов)
    - [Стилизация](#стилизация)
    - [Типизация](#типизация)
    - [Структура компонента](#структура-компонента)
- [Импорт компонентов](#импорт-компонентов)
- [Обновление версии проекта](#обновление-версии-проекта)

## Технологии
Для написания кода используется связка **React + TypeScript + SCSS**.

- **Хранилище**: Redux Toolkit
- **Сборка библиотеки**: Rollup
- **Документация**: Storybook

## Структура проекта
Весь код расположен в папке `src`, которая содержит следующие директории:

- **assets** — ресурсы проекта (изображения, шрифты и др.).
- **components** — переиспользуемые UI-компоненты.
- **constants** — файлы с константами, используемыми в коде.
- **hooks** — кастомные React-хуки.
- **pages** — страницы приложения.
- **routes** — маршруты и роутинг проекта.
- **services** — работа с API, бизнес-логика.
- **stores** — управление состоянием
- **stories** — файлы для Storybook (тестирование и документирование компонентов).
- **type** — определения типов TypeScript.
- **ui** — стили и UI-решения.
- **utils** — вспомогательные утилиты и функции.
- **widgets** — сложные, независимые модули интерфейса.

Файл `index.ts` является точкой входа в проект или экспортирует основные модули.


## Правила написания компонентов

### Название файлов
- Основной файл: `index.tsx`
- Файл типов: `component-name.type.ts`
- Файл стилей: `component-name.scss`

### Стилизация
Используется **БЭМ-нейминг** для CSS-классов.

Стили должны быть изолированы внутри компонента:

```scss
.user-profile {
    &__header {
        &--collapsed {
            height: 40px;
        }
    }
}
```

### Типизация
- Типы в отдельные файлы
- interface для публичного API
- type для сложных типов и объединений
- `Type` в конце названия типов
```ts
export interface UserProfilePropsType {
user: User;
onEdit?: (user: User) => void;
}

type UserProfileActions = 'edit' | 'delete' | 'view';
```

### Структура компонента
#### От общего к частному
Сначала объявляются хуки, влияющие на общее поведение компонента (состояния, контексты), затем более специфичная логика.

#### Группировка по функционалу
Объединение связанных элементов (состояние + эффекты, работающие с ним).

#### Жизненный цикл компонента
Порядок кода должен соответствовать последовательности выполнения:
1. Инициализация состояния
2. Подписки
3. Эффекты
4. Рендер

### Импорт компонентов
Проект импортируется как единый модуль через компонент `AdminBase`.

Если требуется использовать отдельные функции или утилиты вне `AdminBase`, следуйте этим правилам:
1. Каждый компонент должен содержать `export default` в своем файле.
2. Добавьте импорт компонента в `src/index.ts`.

### Обновление версии проекта
Коммит с обновлением версии должен быть **последним** в задаче и иметь коммит-месседж:
```sh
up version to X.Y.Z
```

#### Шаги обновления:
1. **Повысить версию** в `package.json` (использовать [семантическое версионирование](https://semver.org/)).
2. **Описать изменения** в `CHANGELOG.md`.
3. **Запушить изменения** в репозиторий с коммит-месседжем:
```sh
git commit -m "up version to X.Y.Z"
git push
   ```
4. **Дождаться обновления версии в npm** (~7 минут).
